import{w as Q,a as Ae,u as Me,b as Fe,r as a,g as ce,x as ne,j as e,P as I,T as W,m as $e,d as h,G as Be,q as Re,S as _,s as Ee,e as re}from"./index-o28qtZ4E.js";import{f as oe}from"./formatters-BhAPqf4o.js";import{P as We}from"./PageWrapper-D4uzFYGf.js";import{B as c,m as b,a as de}from"./proxy-D6mGC7EI.js";import{C as o,I as xe,S as B,M as K}from"./Modal-7Sg338uS.js";import{B as j}from"./Badge-Br48OPWn.js";import{S as De}from"./scale-DaJuZKuB.js";import{G as Ge}from"./gem-D6g62J2O.js";import{M as C}from"./map-pin-CM4a5Gr_.js";import{F as Te}from"./funnel--zIacCUr.js";import{A as me}from"./index-B9GDT2Wk.js";import{R as Oe,B as Ve}from"./rotate-ccw-D7q9mWgT.js";import{P as f}from"./printer-BXY7LAxL.js";import{B as he}from"./box-B3DJ7QKf.js";import{C as _e}from"./clock-C6f4WYXs.js";import{S as Ke}from"./save-CPbhu9KD.js";import{D as Qe}from"./download-Bqlh6cxb.js";const qe=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],He=Q("list",qe);const Ue=[["path",{d:"M21 10.656V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h12.344",key:"2acyp4"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],L=Q("square-check-big",Ue);const Ye=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],R=Q("square",Ye),Ze={999:"999 (24K)",916:"916 (22K)",875:"875 (21K)",750:"750 (18K)",585:"585 (14K)",375:"375 (9K)"},E={active:{label:"In Storage",variant:"success",icon:Re,color:"emerald"},overdue:{label:"Overdue",variant:"error",icon:W,color:"red"},redeemed:{label:"Released",variant:"secondary",icon:I,color:"zinc"},forfeited:{label:"Forfeited",variant:"warning",icon:_e,color:"amber"}},pe=[{id:"small",name:"Small (25x15mm)",width:25,height:15},{id:"medium",name:"Medium (50x25mm)",width:50,height:25},{id:"large",name:"Large (70x35mm)",width:70,height:35},{id:"sticker",name:"Item Sticker (40x20mm)",width:40,height:20}];function us(){const D=Ae(),N=Me(),{pledges:q}=Fe(s=>s.pledges),[v,H]=a.useState(""),[w,U]=a.useState("all"),[y,Y]=a.useState("all"),[p,Z]=a.useState("active"),[u,J]=a.useState("all"),[G,X]=a.useState("table"),[T,ue]=a.useState(!1),[n,g]=a.useState([]),[z,ee]=a.useState(!1),[ge,P]=a.useState(!1),[m,se]=a.useState(null),[A,M]=a.useState(""),[be,O]=a.useState(!1),[te,ae]=a.useState(null),[je,F]=a.useState(!1),[V,fe]=a.useState("medium"),[S,Ne]=a.useState(1);a.useEffect(()=>{const s=ce(_.PLEDGES,[]);N(ne(s))},[N]);const d=a.useMemo(()=>q.flatMap(s=>(s.items||[]).map((t,l)=>({...t,itemIndex:l,pledgeId:s.id,pledgeNo:s.pledgeNo||s.id,pledgeStatus:s.status,customerName:s.customerName,customerIC:s.customerIC,createdAt:s.createdAt,dueDate:s.dueDate,rackLocation:s.rackLocation||t.rackLocation,loanAmount:s.loanAmount}))),[q]),ve=a.useMemo(()=>[...new Set(d.map(s=>s.category).filter(Boolean))],[d]),we=a.useMemo(()=>[...new Set(d.map(s=>s.rackLocation).filter(Boolean))].sort(),[d]),r=a.useMemo(()=>d.filter(s=>{if(v){const t=v.toLowerCase(),l=s.barcode?.toLowerCase().includes(t),x=s.pledgeId?.toLowerCase().includes(t)||s.pledgeNo?.toLowerCase().includes(t),i=s.customerName?.toLowerCase().includes(t),Ie=s.category?.toLowerCase().includes(t),Pe=s.rackLocation?.toLowerCase().includes(t);if(!l&&!x&&!i&&!Ie&&!Pe)return!1}return!(w!=="all"&&s.purity!==w||y!=="all"&&s.category!==y||u!=="all"&&(u==="unassigned"&&s.rackLocation||u!=="unassigned"&&s.rackLocation!==u)||p!=="all"&&(p==="active"&&s.pledgeStatus!=="active"||p==="overdue"&&s.pledgeStatus!=="overdue"||p==="redeemed"&&s.pledgeStatus!=="redeemed"))}),[d,v,w,y,u,p]),k=a.useMemo(()=>{const s=d.filter(t=>t.pledgeStatus==="active"||t.pledgeStatus==="overdue");return{totalItems:s.length,totalWeight:s.reduce((t,l)=>t+(parseFloat(l.weight)||0),0),totalValue:s.reduce((t,l)=>t+(l.netValue||0),0),noLocation:s.filter(t=>!t.rackLocation).length,overdue:d.filter(t=>t.pledgeStatus==="overdue").length}},[d]),le=s=>{g(t=>t.includes(s)?t.filter(l=>l!==s):[...t,s])},ie=()=>{g(z?[]:r.map(s=>s.barcode)),ee(!z)},ye=()=>{g([]),ee(!1)},ze=()=>{if(!m)return;const t=ce(_.PLEDGES,[]).map(l=>l.id===m.pledgeId?{...l,rackLocation:A}:l);Ee(_.PLEDGES,t),N(ne(t)),P(!1),se(null),M(""),N(re({type:"success",title:"Location Updated",message:`Rack location set to ${A}`}))},Se=s=>{se(s),M(s.rackLocation||""),P(!0)},$=()=>{F(!0)},ke=()=>{const s=n.length>0?r.filter(i=>n.includes(i.barcode)):r.slice(0,10),t=pe.find(i=>i.id===V),l=`
      <!DOCTYPE html>
      <html>
      <head>
        <title>Print Labels - PawnSys</title>
        <style>
          @page { size: auto; margin: 5mm; }
          * { margin: 0; padding: 0; box-sizing: border-box; }
          body { font-family: Arial, sans-serif; padding: 10px; }
          .header { background: #f5f5f5; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
          .header h2 { margin-bottom: 10px; }
          .header p { color: #666; margin-bottom: 15px; }
          .btn { padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; font-weight: bold; margin-right: 10px; }
          .btn-print { background: #f59e0b; color: white; }
          .btn-close { background: #e5e5e5; color: #333; }
          .labels-container { display: flex; flex-wrap: wrap; gap: 10px; justify-content: flex-start; }
          .label { border: 1px solid #ccc; padding: 8px; background: white; page-break-inside: avoid; border-radius: 4px; }
          .label-small { width: 100px; }
          .label-medium { width: 190px; }
          .label-large { width: 260px; }
          .label-sticker { width: 150px; }
          .company { font-size: 9px; font-weight: bold; text-align: center; border-bottom: 1px solid #ddd; padding-bottom: 4px; margin-bottom: 6px; }
          .barcode-area { text-align: center; margin: 8px 0; padding: 5px; background: #fafafa; }
          .barcode-lines { font-family: 'Libre Barcode 128', monospace; font-size: 40px; line-height: 1; }
          .barcode-text { font-family: monospace; font-size: 11px; letter-spacing: 1px; margin-top: 4px; }
          .details { font-size: 9px; }
          .details-row { display: flex; justify-content: space-between; margin: 3px 0; }
          .details-row .label-text { color: #666; }
          .details-row .value { font-weight: bold; }
          .location { background: #e0f2fe; padding: 4px 8px; text-align: center; font-size: 10px; font-weight: bold; margin-top: 6px; border-radius: 3px; }
          .location-icon { margin-right: 3px; }
          @media print { .header { display: none; } body { padding: 0; } }
        </style>
        <link href="https://fonts.googleapis.com/css2?family=Libre+Barcode+128&display=swap" rel="stylesheet">
      </head>
      <body>
        <div class="header">
          <h2>üè∑Ô∏è Label Print Preview</h2>
          <p><strong>${s.length}</strong> label(s) √ó <strong>${S}</strong> copy(s) = <strong>${s.length*S}</strong> total labels</p>
          <p>Size: <strong>${t.name}</strong></p>
          <button class="btn btn-print" onclick="window.print()">üñ®Ô∏è Print Now</button>
          <button class="btn btn-close" onclick="window.close()">‚úï Close</button>
        </div>
        
        <div class="labels-container">
          ${s.map(i=>Array(S).fill(0).map(()=>`
              <div class="label label-${V}">
                <div class="company">PAWNSYS SDN BHD</div>
                <div class="barcode-area">
                  <div class="barcode-lines">*${i.barcode||"N/A"}*</div>
                  <div class="barcode-text">${i.barcode||"N/A"}</div>
                </div>
                <div class="details">
                  <div class="details-row">
                    <span class="label-text">Pledge:</span>
                    <span class="value">${i.pledgeNo||i.pledgeId}</span>
                  </div>
                  <div class="details-row">
                    <span class="label-text">Item:</span>
                    <span class="value">${i.category||"Gold"} (${i.purity||"N/A"})</span>
                  </div>
                  <div class="details-row">
                    <span class="label-text">Weight:</span>
                    <span class="value">${parseFloat(i.weight||0).toFixed(2)}g</span>
                  </div>
                </div>
                ${i.rackLocation?`<div class="location"><span class="location-icon">üìç</span>${i.rackLocation}</div>`:""}
              </div>
            `).join("")).join("")}
        </div>
      </body>
      </html>
    `,x=window.open("","_blank");x.document.write(l),x.document.close(),F(!1),N(re({type:"success",title:"Print Preview Opened",message:`${s.length*S} labels ready`}))},Ce=()=>{H(""),U("all"),Y("all"),Z("active"),J("all")},Le=v||w!=="all"||y!=="all"||p!=="active"||u!=="all";return e.jsxs(We,{title:"Inventory Management",subtitle:"Track, locate, and manage all pledged items",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[n.length>0&&e.jsxs(j,{variant:"info",className:"mr-2",children:[n.length," selected"]}),e.jsx(c,{variant:"outline",leftIcon:f,onClick:$,children:"Print Labels"}),e.jsx(c,{variant:"outline",leftIcon:Qe,children:"Export"})]}),children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-6",children:[e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center",children:e.jsx(I,{className:"w-5 h-5 text-amber-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Total Items"}),e.jsx("p",{className:"text-xl font-bold text-zinc-800",children:k.totalItems})]})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center",children:e.jsx(De,{className:"w-5 h-5 text-blue-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Total Weight"}),e.jsxs("p",{className:"text-xl font-bold text-blue-600",children:[k.totalWeight.toFixed(2),"g"]})]})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center",children:e.jsx(Ge,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Total Value"}),e.jsx("p",{className:"text-xl font-bold text-emerald-600",children:oe(k.totalValue)})]})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-red-100 flex items-center justify-center",children:e.jsx(W,{className:"w-5 h-5 text-red-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Overdue"}),e.jsx("p",{className:"text-xl font-bold text-red-600",children:k.overdue})]})]})}),e.jsx(o,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-100 flex items-center justify-center",children:e.jsx(C,{className:"w-5 h-5 text-zinc-600"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"No Location"}),e.jsx("p",{className:"text-xl font-bold text-zinc-600",children:k.noLocation})]})]})})]}),e.jsxs(o,{className:"p-4 mb-6",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(xe,{placeholder:"Search barcode, pledge no, customer, category...",value:v,onChange:s=>H(s.target.value),leftIcon:$e})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(B,{value:p,onChange:s=>Z(s.target.value),options:[{value:"all",label:"All Status"},{value:"active",label:"In Storage"},{value:"overdue",label:"Overdue"},{value:"redeemed",label:"Released"}],className:"w-32"}),e.jsxs(c,{variant:"outline",leftIcon:Te,onClick:()=>ue(!T),className:h(T&&"bg-zinc-100"),children:["Filters",Le&&e.jsx("span",{className:"ml-1 w-2 h-2 rounded-full bg-amber-500"})]}),e.jsxs("div",{className:"flex border border-zinc-200 rounded-lg overflow-hidden",children:[e.jsx("button",{className:h("p-2 transition-colors",G==="table"?"bg-zinc-100":"hover:bg-zinc-50"),onClick:()=>X("table"),children:e.jsx(He,{className:"w-4 h-4"})}),e.jsx("button",{className:h("p-2 transition-colors",G==="grid"?"bg-zinc-100":"hover:bg-zinc-50"),onClick:()=>X("grid"),children:e.jsx(Be,{className:"w-4 h-4"})})]})]})]}),e.jsx(me,{children:T&&e.jsx(b.div,{initial:{height:0,opacity:0},animate:{height:"auto",opacity:1},exit:{height:0,opacity:0},className:"overflow-hidden",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-4 pt-4 border-t border-zinc-200",children:[e.jsx(B,{label:"Category",value:y,onChange:s=>Y(s.target.value),options:[{value:"all",label:"All Categories"},...ve.map(s=>({value:s,label:s}))]}),e.jsx(B,{label:"Purity",value:w,onChange:s=>U(s.target.value),options:[{value:"all",label:"All Purities"},...Object.entries(Ze).map(([s,t])=>({value:s,label:t}))]}),e.jsx(B,{label:"Rack Location",value:u,onChange:s=>J(s.target.value),options:[{value:"all",label:"All Locations"},{value:"unassigned",label:"‚ö†Ô∏è Unassigned"},...we.map(s=>({value:s,label:s}))]}),e.jsx("div",{className:"flex items-end",children:e.jsx(c,{variant:"outline",onClick:Ce,leftIcon:Oe,children:"Clear Filters"})})]})})})]}),n.length>0&&e.jsx(b.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mb-4",children:e.jsx(o,{className:"p-3 bg-amber-50 border-amber-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(L,{className:"w-5 h-5 text-amber-600"}),e.jsxs("span",{className:"font-medium text-amber-800",children:[n.length," item(s) selected"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(c,{size:"sm",variant:"accent",leftIcon:f,onClick:$,children:"Print Selected"}),e.jsx(c,{size:"sm",variant:"outline",onClick:ye,children:"Clear"})]})]})})}),e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("p",{className:"text-sm text-zinc-500",children:["Showing ",e.jsx("strong",{children:r.length})," items"]}),e.jsxs("button",{className:"text-sm text-amber-600 hover:text-amber-700 flex items-center gap-1",onClick:ie,children:[z?e.jsx(L,{className:"w-4 h-4"}):e.jsx(R,{className:"w-4 h-4"}),z?"Deselect All":"Select All"]})]}),e.jsx(me,{mode:"wait",children:G==="table"?e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},children:e.jsx(o,{className:"overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-zinc-50 border-b border-zinc-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-4 text-left w-10",children:e.jsx("button",{onClick:ie,children:z?e.jsx(L,{className:"w-5 h-5 text-amber-500"}):e.jsx(R,{className:"w-5 h-5 text-zinc-400"})})}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Item"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Barcode"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Pledge"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Customer"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Weight"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Purity"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Location"}),e.jsx("th",{className:"p-4 text-left text-xs font-semibold text-zinc-500 uppercase",children:"Status"}),e.jsx("th",{className:"p-4 text-center text-xs font-semibold text-zinc-500 uppercase",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-100",children:r.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:10,className:"p-12 text-center",children:[e.jsx(he,{className:"w-12 h-12 text-zinc-300 mx-auto mb-3"}),e.jsx("p",{className:"text-zinc-500",children:"No items found"})]})}):r.map((s,t)=>{const l=E[s.pledgeStatus]||E.active,x=l.icon,i=n.includes(s.barcode);return e.jsxs(b.tr,{initial:{opacity:0},animate:{opacity:1},transition:{delay:Math.min(t*.02,.3)},className:h("hover:bg-zinc-50 transition-colors",i&&"bg-amber-50"),children:[e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>le(s.barcode),children:i?e.jsx(L,{className:"w-5 h-5 text-amber-500"}):e.jsx(R,{className:"w-5 h-5 text-zinc-300 hover:text-zinc-400"})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-zinc-100 flex items-center justify-center overflow-hidden",children:s.photo?e.jsx("img",{src:s.photo,alt:"",className:"w-full h-full object-cover cursor-pointer",onClick:()=>{ae(s.photo),O(!0)}}):e.jsx(I,{className:"w-5 h-5 text-zinc-400"})}),e.jsx("span",{className:"font-medium text-zinc-800 capitalize",children:s.category})]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-zinc-400"}),e.jsx("code",{className:"text-sm font-mono bg-zinc-100 px-2 py-1 rounded",children:s.barcode||"N/A"})]})}),e.jsx("td",{className:"p-4",children:e.jsx("button",{onClick:()=>D(`/pledges/${s.pledgeId}`),className:"text-amber-600 hover:text-amber-700 font-medium text-sm",children:s.pledgeNo||s.pledgeId})}),e.jsx("td",{className:"p-4",children:e.jsx("p",{className:"text-sm text-zinc-800",children:s.customerName})}),e.jsx("td",{className:"p-4",children:e.jsxs("span",{className:"font-semibold",children:[parseFloat(s.weight||0).toFixed(2),"g"]})}),e.jsx("td",{className:"p-4",children:e.jsx(j,{variant:"outline",children:s.purity||"N/A"})}),e.jsx("td",{className:"p-4",children:s.rackLocation?e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(C,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-medium text-blue-600",children:s.rackLocation})]}):e.jsxs("span",{className:"text-red-500 text-sm flex items-center gap-1",children:[e.jsx(W,{className:"w-3 h-3"}),"Unassigned"]})}),e.jsx("td",{className:"p-4",children:e.jsxs(j,{variant:l.variant,children:[e.jsx(x,{className:"w-3 h-3 mr-1"}),l.label]})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(c,{variant:"ghost",size:"icon-sm",title:"View Pledge",onClick:()=>D(`/pledges/${s.pledgeId}`),children:e.jsx(de,{className:"w-4 h-4"})}),e.jsx(c,{variant:"ghost",size:"icon-sm",title:"Print Label",onClick:()=>{g([s.barcode]),$()},children:e.jsx(f,{className:"w-4 h-4"})}),(s.pledgeStatus==="active"||s.pledgeStatus==="overdue")&&e.jsx(c,{variant:"ghost",size:"icon-sm",title:"Set Location",onClick:()=>Se(s),children:e.jsx(C,{className:"w-4 h-4"})})]})})]},`${s.barcode}-${t}`)})})]})})})},"table"):e.jsx(b.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-4",children:r.length===0?e.jsxs(o,{className:"col-span-full p-12 text-center",children:[e.jsx(he,{className:"w-12 h-12 text-zinc-300 mx-auto mb-3"}),e.jsx("p",{className:"text-zinc-500",children:"No items found"})]}):r.map((s,t)=>{const l=E[s.pledgeStatus]||E.active,x=n.includes(s.barcode);return e.jsx(b.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:Math.min(t*.02,.3)},children:e.jsxs(o,{className:h("overflow-hidden hover:shadow-lg transition-all relative",x&&"ring-2 ring-amber-500"),children:[e.jsx("div",{className:"absolute top-2 left-2 z-10",children:e.jsx("button",{onClick:i=>{i.stopPropagation(),le(s.barcode)},className:"w-6 h-6 rounded bg-white/80 flex items-center justify-center",children:x?e.jsx(L,{className:"w-5 h-5 text-amber-500"}):e.jsx(R,{className:"w-5 h-5 text-zinc-400"})})}),e.jsxs("div",{className:"aspect-square bg-zinc-100 relative",children:[s.photo?e.jsx("img",{src:s.photo,alt:s.category,className:"w-full h-full object-cover",onClick:()=>{ae(s.photo),O(!0)}}):e.jsx("div",{className:"w-full h-full flex items-center justify-center",children:e.jsx(I,{className:"w-12 h-12 text-zinc-300"})}),e.jsx(j,{variant:l.variant,className:"absolute top-2 right-2",children:l.label})]}),e.jsxs("div",{className:"p-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-800 capitalize text-sm",children:s.category}),e.jsx(j,{variant:"outline",className:"text-xs",children:s.purity})]}),e.jsx("p",{className:"text-xs text-zinc-500 font-mono mb-2 truncate",children:s.barcode}),e.jsxs("div",{className:"flex items-center justify-between text-sm mb-2",children:[e.jsxs("span",{className:"text-zinc-600",children:[parseFloat(s.weight||0).toFixed(2),"g"]}),e.jsx("span",{className:"font-semibold text-emerald-600",children:oe(s.netValue||0)})]}),s.rackLocation?e.jsxs("div",{className:"flex items-center gap-1 text-xs text-blue-600 bg-blue-50 px-2 py-1 rounded",children:[e.jsx(C,{className:"w-3 h-3"}),s.rackLocation]}):e.jsxs("div",{className:"flex items-center gap-1 text-xs text-red-500 bg-red-50 px-2 py-1 rounded",children:[e.jsx(W,{className:"w-3 h-3"}),"No location"]}),e.jsxs("div",{className:"flex gap-1 mt-3",children:[e.jsxs(c,{variant:"outline",size:"sm",className:"flex-1",onClick:()=>D(`/pledges/${s.pledgeId}`),children:[e.jsx(de,{className:"w-3 h-3 mr-1"}),"View"]}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>{g([s.barcode]),$()},children:e.jsx(f,{className:"w-3 h-3"})})]})]})]})},`${s.barcode}-${t}`)})},"grid")}),e.jsx(K,{isOpen:ge,onClose:()=>P(!1),title:"Set Storage Location",size:"sm",children:e.jsxs("div",{className:"p-5",children:[m&&e.jsx("div",{className:"mb-4 p-3 bg-zinc-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-amber-100 rounded-lg flex items-center justify-center",children:e.jsx(I,{className:"w-6 h-6 text-amber-600"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-medium capitalize",children:[m.category," - ",m.purity]}),e.jsx("p",{className:"text-xs text-zinc-500 font-mono",children:m.barcode}),e.jsx("p",{className:"text-xs text-zinc-400",children:m.pledgeNo||m.pledgeId})]})]})}),e.jsx(xe,{label:"Rack / Locker Location",placeholder:"e.g., A-01, B-05, SAFE-1",value:A,onChange:s=>M(s.target.value.toUpperCase()),leftIcon:C,helperText:"Enter rack code (e.g., A-01 means Rack A, Slot 01)"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-zinc-500 mb-2",children:"Quick Select:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["A-01","A-02","B-01","B-02","C-01","SAFE-1"].map(s=>e.jsx("button",{onClick:()=>M(s),className:h("px-3 py-1 text-sm rounded-lg border transition-colors",A===s?"bg-amber-100 border-amber-300 text-amber-700":"border-zinc-200 hover:bg-zinc-50"),children:s},s))})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsx(c,{variant:"outline",fullWidth:!0,onClick:()=>P(!1),children:"Cancel"}),e.jsx(c,{variant:"accent",fullWidth:!0,leftIcon:Ke,onClick:ze,children:"Save Location"})]})]})}),e.jsx(K,{isOpen:je,onClose:()=>F(!1),title:"Print Barcode Labels",size:"md",children:e.jsxs("div",{className:"p-5",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-700",children:"Items to Print"}),e.jsxs(j,{variant:"info",children:[n.length>0?n.length:Math.min(r.length,10)," labels"]})]}),e.jsx("div",{className:"p-3 bg-zinc-50 rounded-lg max-h-32 overflow-y-auto",children:n.length>0?e.jsxs("div",{className:"space-y-1",children:[r.filter(s=>n.includes(s.barcode)).slice(0,5).map(s=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"font-mono",children:s.barcode}),e.jsx("span",{className:"text-zinc-500 capitalize",children:s.category})]},s.barcode)),n.length>5&&e.jsxs("p",{className:"text-xs text-zinc-400",children:["...and ",n.length-5," more"]})]}):e.jsx("p",{className:"text-sm text-zinc-500",children:"No items selected. Will print first 10 items from filtered list."})})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Label Size"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:pe.map(s=>e.jsxs("button",{onClick:()=>fe(s.id),className:h("p-3 rounded-lg border-2 text-left transition-all",V===s.id?"border-amber-500 bg-amber-50":"border-zinc-200 hover:border-zinc-300"),children:[e.jsx("p",{className:"font-medium text-sm",children:s.name}),e.jsxs("p",{className:"text-xs text-zinc-500",children:[s.width,"mm √ó ",s.height,"mm"]})]},s.id))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-700 mb-2",children:"Copies per Item"}),e.jsx("div",{className:"flex items-center gap-2",children:[1,2,3].map(s=>e.jsx("button",{onClick:()=>Ne(s),className:h("w-12 h-12 rounded-lg border-2 font-bold transition-all",S===s?"border-amber-500 bg-amber-50 text-amber-700":"border-zinc-200 hover:border-zinc-300"),children:s},s))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("p",{className:"text-sm font-medium text-zinc-700 mb-2",children:"Label Preview"}),e.jsx("div",{className:"border border-zinc-200 rounded-lg p-4 bg-white",children:e.jsxs("div",{className:"border border-dashed border-zinc-300 p-3 max-w-[200px] mx-auto",children:[e.jsx("p",{className:"text-[8px] font-bold text-center border-b border-zinc-200 pb-1 mb-2",children:"PAWNSYS SDN BHD"}),e.jsxs("div",{className:"text-center mb-2 bg-zinc-50 p-2",children:[e.jsx("p",{className:"font-mono text-2xl tracking-wider",children:"||||||||||||"}),e.jsx("p",{className:"font-mono text-[10px]",children:"PLG-2024-001-01"})]}),e.jsxs("div",{className:"text-[8px] space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Pledge:"}),e.jsx("span",{className:"font-bold",children:"PLG-2024-001"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Item:"}),e.jsx("span",{className:"font-bold",children:"Ring (916)"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Weight:"}),e.jsx("span",{className:"font-bold",children:"5.25g"})]})]}),e.jsx("div",{className:"mt-2 bg-blue-100 text-center text-[8px] font-bold py-1 rounded",children:"üìç A-01"})]})})]}),e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg mb-6",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(f,{className:"w-4 h-4 text-blue-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-blue-700",children:[e.jsx("p",{className:"font-medium",children:"How Barcode Printing Works:"}),e.jsxs("ol",{className:"list-decimal list-inside text-xs mt-1 space-y-1",children:[e.jsx("li",{children:'Click "Generate Labels" to open print preview'}),e.jsx("li",{children:"A new window shows all labels ready to print"}),e.jsx("li",{children:'Click "Print Now" in the preview window'}),e.jsx("li",{children:"Select your label printer (Zebra, Brother, etc.)"}),e.jsx("li",{children:"Configure paper size to match label sheets"})]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(c,{variant:"outline",fullWidth:!0,onClick:()=>F(!1),children:"Cancel"}),e.jsx(c,{variant:"accent",fullWidth:!0,leftIcon:f,onClick:ke,children:"Generate Labels"})]})]})}),e.jsx(K,{isOpen:be,onClose:()=>O(!1),title:"Item Photo",size:"lg",children:e.jsx("div",{className:"p-4",children:te&&e.jsx("img",{src:te,alt:"Item",className:"w-full max-h-[70vh] object-contain rounded-lg"})})})]})}export{us as default};
