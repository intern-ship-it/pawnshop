import{u as D,a as I,b as L,r as t,g as E,c as f,j as e,U as H,d as g,l as R,e as C,S as k}from"./index-o28qtZ4E.js";import{m as i,E as V,a as B,B as F}from"./proxy-D6mGC7EI.js";import{C as G}from"./check-DGHPnJ4E.js";import{L as W}from"./lock-D12x4_nz.js";const _=[{username:"superadmin",password:"password123",role:"Super Admin"},{username:"admin",password:"password123",role:"Administrator"},{username:"manager",password:"password123",role:"Manager"},{username:"cashier",password:"password123",role:"Cashier"},{username:"auditor",password:"password123",role:"Auditor"}],O=["KPKT Malaysia Compliant","Real-time Gold Price Tracking","Comprehensive Reporting","Multi-branch Support"];function X(){const l=D(),y=I(),{isAuthenticated:j,loading:d,error:p}=L(s=>s.auth),[o,v]=t.useState({username:"",password:""}),[n,m]=t.useState({}),[u,P]=t.useState(!1),[M,U]=t.useState(!1),[x,h]=t.useState(!1),[b,w]=t.useState("PawnSys"),[N,S]=t.useState("PS");t.useEffect(()=>{const s=E(k.SETTINGS,{});if(s.company?.name){w(s.company.name);const a=s.company.name.split(" ");S(a.length>=2?a[0][0]+a[1][0]:s.company.name.substring(0,2).toUpperCase())}},[]),t.useEffect(()=>{const s=a=>{const r=a.detail||E(k.SETTINGS,{});if(r.company?.name){w(r.company.name);const c=r.company.name.split(" ");S(c.length>=2?c[0][0]+c[1][0]:r.company.name.substring(0,2).toUpperCase())}};return window.addEventListener("settingsUpdated",s),()=>window.removeEventListener("settingsUpdated",s)},[]),t.useEffect(()=>{j&&y("/",{replace:!0})},[j,y]),t.useEffect(()=>{p&&(m({form:p}),h(!1))},[p]),t.useEffect(()=>()=>{l(f())},[l]);const z=s=>{const{name:a,value:r}=s.target;v(c=>({...c,[a]:r})),(n[a]||n.form)&&(m(c=>({...c,[a]:null,form:null})),l(f()))},T=()=>{const s={};return o.username.trim()||(s.username="Username is required"),o.password||(s.password="Password is required"),m(s),Object.keys(s).length===0},A=async s=>{if(s.preventDefault(),s.stopPropagation(),!!T()&&!(x||d)){h(!0),m({});try{const a=await l(R({username:o.username,password:o.password})).unwrap();l(C({id:Date.now(),type:"success",title:"Login Successful!",message:"Welcome back, "+(a.user?.name||"User")+"!"}))}catch(a){const r=a?.message||a||"Invalid username or password";m({form:r}),h(!1),l(C({id:Date.now(),type:"error",title:"Login Failed",message:r}))}}},K=s=>{v({username:s.username,password:s.password}),m({}),l(f())};return e.jsxs("div",{className:"min-h-screen flex",children:[e.jsxs("div",{className:"hidden lg:flex flex-1 bg-zinc-900 text-white p-12 flex-col justify-center relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden pointer-events-none",children:[e.jsx("div",{className:"absolute -top-40 -right-40 w-80 h-80 bg-amber-500/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute -bottom-40 -left-40 w-80 h-80 bg-amber-500/5 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23f59e0b' fill-opacity='0.4'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})]}),e.jsx(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},transition:{duration:.6},className:"mb-12",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex items-center justify-center w-14 h-14 rounded-xl bg-amber-500 shadow-[0_0_30px_rgba(245,158,11,0.5)]",children:e.jsx("span",{className:"text-2xl font-bold text-zinc-900",children:N})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:b}),e.jsx("p",{className:"text-amber-500 text-sm",children:"Pajak Kedai Management"})]})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"mb-8",children:e.jsxs("h2",{className:"text-5xl font-bold leading-tight",children:["Streamline Your",e.jsx("br",{}),e.jsx("span",{className:"text-amber-500",children:"Pawn Business"})]})}),e.jsx(i.p,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"text-zinc-400 mb-8 max-w-md",children:"Complete pawn shop management system compliant with KPKT Malaysia regulations."}),e.jsx(i.ul,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.4},className:"space-y-3",children:O.map((s,a)=>e.jsxs(i.li,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{duration:.4,delay:.5+a*.1},className:"flex items-center gap-3 text-zinc-300",children:[e.jsx("div",{className:"w-5 h-5 rounded-full bg-amber-500/20 flex items-center justify-center",children:e.jsx(G,{className:"w-3 h-3 text-amber-500"})}),s]},a))})]}),e.jsx("div",{className:"flex-1 flex items-center justify-center p-8 bg-zinc-100",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"lg:hidden flex items-center justify-center gap-3 mb-8",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 rounded-xl bg-amber-500",children:e.jsx("span",{className:"text-xl font-bold text-zinc-900",children:N})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-zinc-800",children:b}),e.jsx("p",{className:"text-amber-600 text-sm",children:"Pajak Kedai Management"})]})]}),e.jsxs(i.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.2},className:"bg-white rounded-2xl shadow-xl p-8",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-zinc-800",children:"Welcome Back"}),e.jsx("p",{className:"text-zinc-500 mt-1",children:"Sign in to your account"})]}),e.jsxs("form",{onSubmit:A,className:"space-y-5",children:[n.form&&e.jsx(i.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"p-3 rounded-lg bg-red-50 border border-red-200 text-red-700 text-sm",children:n.form}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:["Username ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(H,{className:"h-5 w-5 text-zinc-400"})}),e.jsx("input",{type:"text",name:"username",value:o.username,onChange:z,className:g("block w-full pl-10 pr-3 py-2.5 border rounded-lg","bg-white text-zinc-900 placeholder-zinc-400","focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500",n.username?"border-red-300":"border-zinc-300"),placeholder:"Enter your username"})]}),n.username&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.username})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-zinc-700 mb-1.5",children:["Password ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:e.jsx(W,{className:"h-5 w-5 text-zinc-400"})}),e.jsx("input",{type:u?"text":"password",name:"password",value:o.password,onChange:z,className:g("block w-full pl-10 pr-10 py-2.5 border rounded-lg","bg-white text-zinc-900 placeholder-zinc-400","focus:outline-none focus:ring-2 focus:ring-amber-500/20 focus:border-amber-500",n.password?"border-red-300":"border-zinc-300"),placeholder:"Enter your password"}),e.jsx("button",{type:"button",onClick:()=>P(!u),className:"absolute inset-y-0 right-0 pr-3 flex items-center text-zinc-400 hover:text-zinc-600",children:u?e.jsx(V,{className:"h-5 w-5"}):e.jsx(B,{className:"h-5 w-5"})})]}),n.password&&e.jsx("p",{className:"mt-1 text-sm text-red-600",children:n.password})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M,onChange:s=>U(s.target.checked),className:"w-4 h-4 rounded border-zinc-300 text-amber-600 focus:ring-amber-500"}),e.jsx("span",{className:"text-sm text-zinc-600",children:"Remember me"})]}),e.jsx("button",{type:"button",className:"text-sm text-amber-600 hover:text-amber-700 font-medium",children:"Forgot password?"})]}),e.jsx(F,{type:"submit",variant:"accent",size:"lg",fullWidth:!0,loading:x||d,disabled:x||d,children:x||d?"Signing In...":"Sign In"})]}),e.jsxs("div",{className:"mt-8 pt-6 border-t border-zinc-200",children:[e.jsx("p",{className:"text-xs text-zinc-500 text-center mb-3",children:"Demo Accounts (Click to autofill)"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:_.map(s=>e.jsx("button",{type:"button",onClick:()=>K(s),className:g("px-3 py-2 rounded-lg border text-sm font-medium transition-all","border-zinc-200 hover:border-amber-300 hover:bg-amber-50",o.username===s.username&&"border-amber-400 bg-amber-50"),children:e.jsx("span",{className:"text-zinc-700",children:s.role})},s.username))})]})]}),e.jsxs(i.p,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"text-center text-xs text-zinc-500 mt-6",children:["Â© 2025 ",b,". KPKT Malaysia Compliant System."]})]})})]})}export{X as default};
